<div class="header" style="display: none">
    <div class="header__body">

        The minimalist portfolio to track your crypto currencies
    </div>
</div>

<component-folio v-cloak inline-template>
    <div class="folio">
        <div class="folio__total">{{currency}}{{humanizePrice | formatCurrency}}</div>
        <div class="folio__title">Total value of your folio</div>
    </div>
</component-folio>

<div class="grid grid--center">
    <div class="grid__cell grid__cell--80">
        <div class="coins">
            <div class="grid grid--left">

                <% @folio.folio_crypto_currencies.each do |folio_crypto_currency| %>
                    <component-currency v-cloak inline-template
                        crypto-currency="<%= folio_crypto_currency.crypto_currency.to_json %>"
                        folio-crypto-currency="<%= folio_crypto_currency.to_json %>"
                        folio-currency="<%= folio_crypto_currency.folio.currency.to_json %>"
                    >
                        <div class="grid__cell grid__cell--25">
                            <div class="coins__item">
                                <div class="coins__item-name">
                                    <span class="coins__item-name-name">{{crypto.name}}</span>
                                    <span class="coins__item-name-symbol">{{crypto.symbol}}</span>
                                </div>
                                <div class="coins__item-price">
                                    {{currency.symbol}}{{priceHolding | formatCurrency}}
                                </div>
                                <div class="coins__item-hold">
                                    Holding: <input v-model="folio.holding" :value="folio.holding" type="number" class="coins__item-hold-input">
                                </div>
                                <div class="coins__item-unit">
                                    <br/>
                                    1 {{crypto.symbol}} = {{unitCryptoPrice}}
                                </div>
                                <div class="coins__item-arrow">
                                </div>
                                <div class="coins__item-actions">
                                    <%= form_tag(folio_crypto_currency_path(folio_crypto_currency.id), method: 'delete') %>
                                        <button type="submit" class="button button--danger">Delete</a>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </component-currency>
                <% end %>
            </div>
        </div>
    </div>
</div>

<div class="grid grid--center">
    <div class="grid__cell grid__cell--80">
        <div class="grid grid--center">
            <div class="grid__cell grid__cell--50">
                <div class="coin-add">
                    <component-currency-add v-cloak inline-template
                        crypto-currencies="<%= @crypto_currencies.to_json %>"
                    >
                        <%= form_tag(controller:  'folio_crypto_currency', action: 'create') %>

                            <div class="coins-add__center">
                                <v-select v-model="selected" :options="options" class="coins-add__select"></v-select>

                                <input type="hidden" name="crypto_currency_id" :value="selected.value"/>
                                <button type="submit" class="button button--primary">Add Asset</button>
                            </div>
                        </form>
                    </component-currency-add>
                </div>
            </div>

            <div class="grid__cell grid__cell--50">
                <div class="folio-save">
                    <component-folio-save v-cloak inline-template
                        current-user="<%= @user.to_json %>"
                    >
                        <div class="folio-save__center">

                            <div v-if="shouldRenderSubscribe">
                                <%= form_tag(controller: 'user_subscribe', action: 'create') %>
                                    <p class="folio-save__description">Don't forget to save your folio!</p>

                                    <div class="folio-save__inputs">
                                        <input type="text" class="folio-save__input" name="email" placeholder="Email" />
                                        <input type="password" class="folio-save__input" name="password" placeholder="Password"  />
                                    </div>

                                    <button type="submit" class="button button--primary">Save Folio</button>
                                </form>
                            </div>

                            <div v-if="shouldRenderConnect">
                                <%= form_tag(controller: 'user_connect', action: 'create') %>
                                    <p class="folio-save__description">Log in to see your folio</p>
                                    <div class="folio-save__inputs">
                                        <input type="text" class="folio-save__input" name="email" placeholder="Email" />
                                        <input type="password" class="folio-save__input" name="password" placeholder="Password"  />
                                    </div>

                                    <button type="submit" class="button button--primary">Log In</button>
                                </form>
                            </div>

                            <div v-if="isUser">
                                <%= form_tag(controller: 'user_disconnect', action: 'create') %>
                                    <button type="submit" class="button button--large button--warning">Log out</button>
                                </form>
                            </div>

                            <div v-if="isAnonymous">
                                <a class="folio-save__link" v-on:click="onClickHaveAFolio">{{textHaveAFolio}}</a>
                            </div>

                        </div>
                    </component-folio-save>
                </div>
            </div>
        </div>
    </div>
</div>
